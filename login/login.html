<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>登录页面</title>
    <link rel="shortcut icon" href="/static/img/logo16px.png">
    <!-- <script src="js/jquery.min.js"></script> -->
    <script type="text/javascript" src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
    <style type="text/css">
    @import url(http://weloveiconfonts.com/api/?family=fontawesome);
    @import url(http://fonts.googleapis.com/css?family=Open+Sans:400,700);
    [class*="fontawesome-"]:before {
        font-family: 'FontAwesome', sans-serif;
    }
    
    * {
        box-sizing: border-box;
    }
    
    html {
        height: 100%;
    }
    
    body {
        background-color: #2c3338;
        color: #606468;
        font: 400 0.875rem/1.5 "Open Sans", sans-serif;
        margin: 0;
        min-height: 100%;
    }
    
    a {
        color: #eee;
        outline: 0;
        text-decoration: none;
    }
    
    a:focus,
    a:hover {
        text-decoration: underline;
    }
    
    input {
        border: 0;
        color: inherit;
        font: inherit;
        margin: 0;
        outline: 0;
        padding: 0;
        -webkit-transition: background-color .3s;
        transition: background-color .3s;
    }
    
    .site__container {
        -webkit-box-flex: 1;
        -webkit-flex: 1;
        -ms-flex: 1;
        flex: 1;
        padding: 3rem 0;
    }
    
    .form input[type="password"],
    .form input[type="text"],
    .form input[type="button"] {
        width: 100%;
    }
    
    .form--login {
        color: #606468;
    }
    
    .form--login label,
    .form--login input[type="text"],
    .form--login input[type="password"],
    .form--login input[type="button"] {
        border-radius: 0.25rem;
        padding: 1rem;
    }
    
    .form--login label {
        background-color: #363b41;
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
        padding-left: 1.25rem;
        padding-right: 1.25rem;
    }
    
    .form--login input[type="text"],
    .form--login input[type="password"] {
        background-color: #3b4148;
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
    }
    
    .form--login input[type="text"]:focus,
    .form--login input[type="text"]:hover,
    .form--login input[type="password"]:focus,
    .form--login input[type="password"]:hover {
        background-color: #434A52;
    }
    
    .form--login input[type="button"] {
        background-color: #ea4c88;
        color: #eee;
        font-weight: bold;
        text-transform: uppercase;
    }
    
    .form--login input[type="button"]:focus,
    .form--login input[type="button"]:hover {
        background-color: #d44179;
    }
    
    .form__field {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        margin-bottom: 1rem;
    }
    
    .form__input {
        -webkit-box-flex: 1;
        -webkit-flex: 1;
        -ms-flex: 1;
        flex: 1;
    }
    
    .align {
        -webkit-box-align: center;
        -webkit-align-items: center;
        -ms-flex-align: center;
        align-items: center;
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: horizontal;
        -webkit-box-direction: normal;
        -webkit-flex-direction: row;
        -ms-flex-direction: row;
        flex-direction: row;
    }
    
    .hidden {
        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
    }
    
    .text--center {
        text-align: center;
    }
    
    .grid__container {
        margin: 0 auto;
        max-width: 20rem;
        width: 90%;
    }
    
    form .error {
        font-size: x-large;
        display: none;
    }
    
    form h1 {
        text-align: center;
    }
    </style>
</head>

<body class="align">
    <div class="site__container">
        <div class="grid__container">
            <form action="" method="post" class="form form--login">
                <h1>登录页面</h1>
                <div class="form__field">
                    <label class="fontawesome-user" for="login__username"><span class="hidden">用户名</span></label>
                    <input id="login__username" name="username" type="text" class="form__input" placeholder="用户名" required>
                </div>
                <div class="form__field">
                    <label class="fontawesome-lock" for="login__password"><span class="hidden">密码</span></label>
                    <input id="login__password" name="password" type="password" class="form__input" placeholder="密码" required>
                </div>
                <div class="form__field">
                    <input id="submit" type="button" value="登录">
                </div>
                <span class="error">网络连接错误！</span>
            </form>
            <!-- <p class="text--center">Not a member? <a href="#">Sign up now</a> <span class="fontawesome-arrow-right"></span></p> -->
        </div>
    </div>
    <script>
    jQuery(document).ready(function($) {

        $('input[name="password"]', 'form').on('keyup', function(evt) {

            if (evt.keyCode === 13) {
                $('#submit').click();
            }
        });

        $('#submit').click(function(event) {

            $('.error', 'form').hide();

            $('input', 'form').attr('disabled', 'disabled');

            $('input[type="button"]', 'form').val('提交中...');

            $.post('/api/oauth/token', {
                "grant_type": "password",
                "client_id": "481c89100ea34c22ba1701fed70dd204",
                "client_secret": "step.newtouch.com",
                "username": $('input[name="username"]', 'form').val(),
                "password": $('input[name="password"]', 'form').val()
            }, function(data, textStatus, xhr) {
                window.location.href = '/?accessToken=' + data.access_token;
            }).error(function() {
                $('.error', 'form').text('网络连接错误！').show();
            }).complete(function() {
                $('input', 'form').removeAttr('disabled');
                $('input[type="button"]', 'form').val('登录');
            });
        });
    });
    </script>
</body>

</html>
